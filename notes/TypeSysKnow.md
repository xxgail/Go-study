# 类型系统

~~本章内容部分来自于《Go语言核心编程》第三章 类型系统~~
## 1. 类型简介
#### 1-1. 命名类型和未命名类型
1. 命名类型：类型可以通过标识符来表示。
    - 预声明类型
        - 布尔型   bool
        - 整型    int,int8,int16,int32,int64,uint,uint8,uint16,uint32,uint64,uintptr
        - 浮点型   float32,float64
        - 复数    complex64,complex128
        - 字符    byte(int8别名),rune(int32别名)
        - 字符串   string
        - 错误    error
    - 自定义类型 type new_type old_type
2. 未命名类型：一个类型由预声明类型、关键字和操作符组合而成。也称为类型字面量。
    - 类型字面量（复合类型）
        - 数组    array
        - 切片    slice
        - 字典    map
        - 指针    pointer
        - 通道    channel
        - 结构    struct
        - 接口    interface{}
        - 函数    function
        
#### 1-2. 底层类型
1. 预声明类型和类型字面量的底层类型是它们自身。
2. 自定义类型的底层类型是逐层递归向下查找的，知道查到的old_type是预声明类型或者类型字面量为止。

#### 1-3. 类型赋值
1. 类型赋值的条件
- 参考示例 [test-1-3.go](../TypeSys/test-1-3.go)
- `var b T2 = a` 条件：
    - T1 和 T2 的类型相同
    - T1 和 T2 具有相同的底层类型，并且 T1 和 T2 里面至少有一个是未命名类型。
    - T2 是接口类型，T1 是具体类型，T1 的方法集是 T2 方法集的超集。
    - T1 和 T2 都是通道类型，它们拥有相同的元素类型，并且 T1 和 T2 中至少有一个是未命名类型。
    - a 是预声明标识符 nil，T2 是pointer、function、slice、map、channel、interface类型中的一个
    - a 是一个字面常量值，可以用来表示类型 T 的值。
    
#### 1-4. 类型强制转换
1. 数值类型和string类型之间的相互转换可能会造成值部分丢失，其他的转换仅是类型的转换，不会造成值的改变。
2. string和数字之间的转换可使用标准库 strconv。

## 2. 类型方法
### 2-1. 自定义类型
1. 匿名字段：
    - 在定义struct的过程中，如果字段只给出了字段类型，没有给出字段名，则为“匿名字段”
    - 被匿名嵌入的字段必须是命名类型或命名类型的指针，类型字面量不能作为匿名字段使用。
    - 一个结构体不能同时存在某一类型及其指针类型的匿名字段。
    

## 4. 组合（继承）和方法集
#### 4-1. 组合
1. 使用type定义的新类型不会继承原有类型的方法，但是命名结构类型可以嵌套其他的命名类型的字段，外层的结构类型可以调用嵌入字段类型的方法。
2. 内嵌字段和方法。
    - 参考示例 [test-4-1.go](../TypeSys/test-4-1.go)
    - 字段和方法都使用.操作符来调用。
    - 字段可以重名，但是要用完整路径来调用，所以尽量不要重名。
    - 方法也可以重名，但是同名方法中外层的方法会覆盖内层的方法。

